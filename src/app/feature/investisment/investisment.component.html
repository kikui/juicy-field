<div class="container" style="margin-top: 70px;">
  <div class="d-flex justify-content-center">
    <ngx-charts-line-chart
      [view]="[window().innerWidth, window().innerHeight -56 -21 -32 -48]"
      [autoScale]="true"
      [legendPosition]="legendPosition"
      [legend]="legend"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="showYAxisLabel"
      [xAxis]="xAxis"
      [yAxis]="yAxis"
      [xAxisLabel]="xAxisLabel"
      [yAxisLabel]="yAxisLabel"
      [results]="myInvestismentGraph">
    </ngx-charts-line-chart>
  </div>

  <div class="col-12 d-flex align-items-center justify-content-center my-3">
    <button mat-raised-button color="primary" (click)="updateData()">Enregistrer</button>
  </div>
</div>

<div class="container-table">
  <table mat-table [dataSource]="myInvestisment" class="mat-elevation-z3 m-3 w-100">
    <ng-container matColumnDef="year">
      <th mat-header-cell *matHeaderCellDef>Année</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="myInvestisment[i].year"/>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="mounth">
      <th mat-header-cell *matHeaderCellDef>Mois</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field>
          <mat-select [(ngModel)]="myInvestisment[i].mounth">
            <mat-option *ngFor="let mounth of oneYear" value="{{mounth.name}}">{{mounth.name}}</mat-option>
          </mat-select>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="mounthInvest">
      <th mat-header-cell *matHeaderCellDef>Investissement</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="myInvestisment[i].mounthInvest"/>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="rentMounth">
      <th mat-header-cell *matHeaderCellDef>Rentré courante</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="myInvestisment[i].currentRent"/>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="reinvest">
      <th mat-header-cell *matHeaderCellDef>Réinvestissement</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="myInvestisment[i].reinvest"/>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="gain">
      <th mat-header-cell *matHeaderCellDef>Retrait</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="myInvestisment[i].gain"/>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>
        <div class="d-flex justify-content-center align-items-center">
          <div>Action</div>
          <button class="add-button ms-2" (click)="addEntrie()"><mat-icon>add</mat-icon></button>
        </div>
      </th>
      <td mat-cell *matCellDef="let element; let i = index">
        <div class="d-flex w-100">
          <button *ngIf="myInvestisment.length > 1" class="m-auto" mat-raised-button color="primary" (click)="deleteEntrie(i)">Supprimer</button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>